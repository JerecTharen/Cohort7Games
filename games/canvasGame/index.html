<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8"/>
  <script type="application/javascript">
  
    function render() {
      var canvas = document.getElementById('canvas');
      if (canvas.getContext) {
        var ctx = canvas.getContext('2d');
        var background = document.getElementById("sbg");
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // Box width
        var bw = 2000;
        // Box height
        var bh = 1000;
        // Padding
        var p = 0;

        var scale = 40;

        var rightPressed = false;
        var upPressed = false;
        var downPressed = false;
        var leftPressed = false;

        const right = 39;
        const left = 37;
        const up = 38;
        const down = 40;

        const level  =   {x: 0 ,y: 15, length: 30, height: 5, area: 30 * 20}
        const scaledlevel  =   {x: level.x * scale ,y: level.y * scale , length: level.length * scale, height: level.height * scale, area: level.length * level.height * scale}
        const level2 =   {x: 30, y: 0, length: 20, height: 30}
        var player   =   {x: 0, y: 0, length: 1, height: 1}
        var scaledplayer   =   {x: player.x * scale, y: player.y * scale, length: player.length * scale, height: player.height * scale}
        var acceleration = 1;
        var gravity = .5;
        var velx = 0;
        var vely = 0;
        var maxspeed = 10;
        var friction = 2;
        var jumpheight = 5;
        var jumpcounter = 0;



        document.addEventListener("keydown", keyDownHandler, false);
        document.addEventListener("keyup", keyUpHandler, false);
        
        function keyDownHandler(e) {
            if(e.keyCode == right) {
            rightPressed = true;
        }
            if(e.keyCode == left) {
            leftPressed = true;
        }
            if(e.keyCode == up) {
            upPressed = true;
        }
            else if(e.keyCode == down) {
            downPressed = true;
        }
        
}

        function keyUpHandler(e) {
            if(e.keyCode == right) {
            rightPressed = false;
        }
            if(e.keyCode == left) {
            leftPressed = false;
        }
            if(e.keyCode == up) {
            upPressed = false;
        }
            else if(e.keyCode == down) {
            downPressed = false;
        }
}
        
        function draw() {
        
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);   
            drawmenu();
            drawBumper();
            drawBG();
            drawBoard();
            drawText();
            

            
        function drawBG(){

            ctx.fillRect(level.x * scale, level.y * scale, scale * level.length, scale * level.height);
            ctx.fillRect(level2.x * scale, level2.y * scale, scale * level2.length, scale * level2.height);
            ctx.fillStyle="white";
            ctx.fillText("X : " + velx ,10 * scale ,20 *scale);

        }
        
        function drawmenu(){
            ctx.fillStyle="white";
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            
        }
        
        function drawText(){

            ctx.font = "40px comic";
            ctx.fillStyle="white";
            ctx.fillText("vely: " + vely ,50, 660);
            ctx.fillText("jumpcount: " + jumpcounter ,250, 660);
            

        }
        
                
        function drawBumper(){
            ctx.fillStyle="black";

            ctx.fillRect(player.x,player.y,scale,scale);

            Math.round(velx);

            if(vely > 10 * scale){
                vely = 10 * scale;
            }

            if (jumpcounter > 1){
                jumpcounter -= .5;
            }
            else{
                jumpcounter = 0;
                
            }

                if(player.y + scaledplayer.height >= scaledlevel.y){
                
                    player.y = scaledlevel.y - scaledplayer.height;

                    jumpcount = 0;


                } else{
                    jumpcount = 3;
                    player.y -= -3;
                    vely += gravity;
                    player.y += vely;
                }    
            
             ctx.fillStyle="black";

                if(leftPressed){
                    velx += -acceleration;
                    player.x += velx;
                }
                if(!leftPressed){
                    if(velx < 0){
                        velx += acceleration * friction;
                        player.x += velx;
                    }
                    if(velx > maxspeed){
                        velx = maxspeed;
                    }
                }
                if(rightPressed){
                    velx += acceleration;
                    player.x += velx;
                }
                if(!rightPressed){
                    if(velx > 0){
                        velx += -acceleration * friction;
                        player.x += velx;
                    }
                    if(velx <  -maxspeed){
                        velx = -maxspeed - 1;
                    }
                    
                }
                    if(upPressed){
                        
                        if(jumpcounter == 0){
                            jumpcounter = 25;
                            console.log(vely);
                            player.y -= vely;
                            vely = -25;
                            
                        }
                    }
                    
                               
        }
                
                function drawBoard(){

                    ctx.fillStyle="black";
                    ctx.strokeStyle = "black";
                    ctx.stroke();
                    
                    //grid length=36( * 40)

                    //grid height=19.5( * 40)

                /*
                    for (var x = 0; x <= bw; x += scale) {
                        ctx.moveTo(0.5 + x + p, p);
                        ctx.lineTo(0.5 + x + p, bh + p);
                    }


                    for (var x = 0; x <= bh; x += 40) {
                        ctx.moveTo(p, 0.5 + x + p);
                        ctx.lineTo(bw + p, 0.5 + x + p);
                    }

                */
}
                       
        }
        
        setInterval(draw, 20);
        
      }
    }
  </script>
  <style>
  body, html{

        width:100%;
        height:100%;
        margin:0; 
        display:flex;
        justify-content:center;  
        align-items:center;
  
  }
	canvas{

        display:block;
        margin: auto auto;
	    margin:0px;

}
	
	
  </style>
 </head>
 <body onload="render();">
   <canvas id="canvas"></canvas>
 </body>
</html>